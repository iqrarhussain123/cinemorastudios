---
import stats from "../data/trusted-by-stats.json";

const logos = [
    {
        src: "/images/logos/client-accelerators.png",
        alt: "Client Accelerators",
    },
    { src: "/images/logos/hodderborg.png", alt: "Hodderborg" },
    { src: "/images/logos/nasdaq.png", alt: "Nasdaq" },
    {
        src: "/images/logos/S%20FIVE%20REAL%20ESTATE.png",
        alt: "S Five Real Estate",
    },
    { src: "/images/logos/SPOKEN-WINES.png", alt: "Spoken Wines" },
    { src: "/images/logos/Success%20School.png", alt: "Success School" },
];

const mobileLogos = logos.slice(3);
---

<section
    class="relative w-full text-zinc-900 overflow-hidden trustedby-shell"
    data-trustedby-section
>
    <!-- Atmospheric Background Glow -->
    <div class="atmospheric-glow"></div>

    <!-- Cinematic Noise Overlay -->
    <div class="noise-overlay"></div>

    <div
        class="relative z-10 mx-auto max-w-[92%] px-2 pt-2 pb-6 sm:px-4 md:px-6"
    >
        <div
            class="flex flex-col gap-4 md:flex-row md:items-center md:justify-between"
        >
            <!-- Left: Trusted by + logos -->
            <div
                class="flex flex-col gap-3 text-center md:w-full md:items-center"
            >
                <div class="relative overflow-hidden">
                    <div class="flex items-center justify-center">
                        <span
                            class="trustedby-pill inline-flex items-center gap-2 rounded-full bg-white/40 px-3 py-1 text-base text-zinc-800 backdrop-blur-xl md:text-lg border border-white/50 font-body"
                        >
                            <span
                                class="trustedby-dot h-2 w-2 rounded-full bg-lime-400 shadow-[0_0_18px_rgba(183,255,42,0.8)]"
                            ></span>
                            Trusted by <span class="text-zinc-900 font-bold"
                                >50+ brands</span
                            >
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <div class="mt-[8px] flex justify-center">
            <div class="w-full px-0 sm:px-[10%] md:px-[12%] lg:px-[14%]">
                <div class="logo-mask overflow-hidden">
                    <div
                        class="logo-marquee mx-auto hidden w-max items-center justify-center gap-4 py-2 sm:gap-8 md:gap-10 lg:flex"
                    >
                        {
                            [...logos, ...logos].map((logo) => (
                                <div class="flex h-20 w-32 items-center justify-center sm:h-32 sm:w-48 md:h-60 md:w-96">
                                    <img
                                        src={logo.src}
                                        alt={logo.alt}
                                        class="max-h-full max-w-full object-contain opacity-70 transition duration-300 hover:opacity-100 hover:scale-105"
                                        loading="lazy"
                                        decoding="async"
                                    />
                                </div>
                            ))
                        }
                    </div>
                    <div
                        class="trustedby-logos-static mx-auto flex w-full max-w-md items-center justify-between gap-6 px-3 py-2 lg:hidden"
                    >
                        {
                            mobileLogos.map((logo) => (
                                <div class="trustedby-logo-item flex items-center justify-center">
                                    <img
                                        src={logo.src}
                                        alt={logo.alt}
                                        class="max-h-full max-w-full object-contain"
                                        loading="lazy"
                                        decoding="async"
                                    />
                                </div>
                            ))
                        }
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats -->
        <div class="trustedby-stats-shell">
            <div
                class="trustedby-stats-grid mt-8 mb-20 grid grid-cols-2 gap-6 sm:gap-8 lg:grid-cols-4"
            >
                {
                    stats.map((s, i) => (
                        <div
                            class="stat-item px-5 py-4 text-center"
                            data-index={i}
                        >
                            <p class="text-4xl font-bold text-zinc-900 md:text-5xl">
                                <span
                                    class="text-lime-500 stat-count drop-shadow-sm"
                                    data-target={s.value}
                                    data-decimals={s.decimals}
                                    data-suffix={s.suffix}
                                >
                                    0
                                </span>
                            </p>
                            <p class="stat-label text-lg text-zinc-600 font-medium">
                                {s.label}
                            </p>
                        </div>
                    ))
                }
            </div>
        </div>

        <!-- Pain Points: Deconstructed Timeline Flow -->
        <div class="trustedby-break">
            <div class="relative mt-4 text-center">
                <p
                    class="text-sm font-semibold tracking-widest text-zinc-500 uppercase mb-2"
                >
                    Is this you?
                </p>
                <h3
                    class="mt-4 text-4xl font-extrabold leading-tight tracking-tight text-zinc-900 md:text-7xl trustedby-playfair"
                >
                    Content feels
                    <span
                        class="trustedby-headline text-lime-600 italic font-medium"
                        data-text="too hard?"
                        aria-label="too hard?"></span><span
                        class="trustedby-cursor cursor-blink text-lime-600"
                    ></span>
                </h3>

                <div
                    class="pointer-events-none relative mt-8 top-6 ml-4 md:ml-20 hidden w-fit flex-col items-center gap-2 text-zinc-500 md:flex animate-float-delayed"
                >
                    <span
                        class="font-handwriting rotate-[-6deg] text-5xl font-bold text-zinc-400"
                        >sounds familiar?</span
                    >
                    <img
                        src="/images/trusted%20by%20icons/arrow.png"
                        alt=""
                        class="h-32 w-52 object-contain opacity-80"
                        loading="lazy"
                        decoding="async"
                    />
                </div>
                <!-- Scroll-Triggered Vertical Text Slider (Desktop Only) -->
                <div
                    class="scroll-container hidden md:block"
                    style="height: 700px;"
                >
                    <div class="viewport-frame">
                        <div class="pp-focus" aria-hidden="true"></div>
                        <div class="pain-point-list">
                            <!-- Pain Point 1 -->
                            <div class="pp-item" data-index="0">
                                <span class="pp-arrow">→</span>
                                <h2 class="pp-text">NO CONVERSIONS</h2>
                            </div>
                            <!-- Pain Point 2 -->
                            <div class="pp-item" data-index="1">
                                <span class="pp-arrow">→</span>
                                <h2 class="pp-text">UNSURE WHAT TO POST</h2>
                            </div>
                            <!-- Pain Point 3 -->
                            <div class="pp-item" data-index="2">
                                <span class="pp-arrow">→</span>
                                <h2 class="pp-text">NOT PREMIUM ENOUGH</h2>
                            </div>
                            <!-- Pain Point 4 -->
                            <div class="pp-item" data-index="3">
                                <span class="pp-arrow">→</span>
                                <h2 class="pp-text">INCONSISTENT POSTING</h2>
                            </div>
                            <!-- Pain Point 5 -->
                            <div class="pp-item" data-index="4">
                                <span class="pp-arrow">→</span>
                                <h2 class="pp-text">CONTRADICTORY ADVICE</h2>
                            </div>
                            <!-- Pain Point 6 -->
                            <div class="pp-item" data-index="5">
                                <span class="pp-arrow">→</span>
                                <h2 class="pp-text">VIEWS, NO ACTION</h2>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mobile/Tablet Pain Points (Premium List) -->
                <div class="mobile-pp-wrap md:hidden mt-16 px-6 pb-16">
                    <div
                        class="mobile-pp-list mx-auto flex max-w-md flex-col gap-12"
                    >
                        <!-- Item 1: No Conversions -->
                        <div class="mobile-pp-item">
                            <div class="mobile-pp-icon" aria-hidden="true">
                                <svg
                                    class="mobile-pp-svg"
                                    viewBox="0 0 64 64"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                >
                                    <rect
                                        x="10"
                                        y="12"
                                        width="44"
                                        height="40"
                                        rx="10"></rect>
                                    <path d="M18 30l10 10 10-8 10 10"></path>
                                </svg>
                            </div>
                            <p class="mobile-pp-text">No conversions</p>
                            <p class="mobile-pp-subtext">
                                Views come in, leads don’t follow.
                            </p>
                        </div>

                        <!-- Item 2: Unsure What To Post -->
                        <div class="mobile-pp-item">
                            <div class="mobile-pp-icon" aria-hidden="true">
                                <svg
                                    class="mobile-pp-svg"
                                    viewBox="0 0 64 64"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                >
                                    <circle cx="32" cy="32" r="20"></circle>
                                    <path d="M26 26a6 6 0 0 1 12 1c0 4-6 4-6 8"
                                    ></path>
                                    <circle
                                        cx="32"
                                        cy="44"
                                        r="1.5"
                                        fill="currentColor"
                                        stroke="none"></circle>
                                </svg>
                            </div>
                            <p class="mobile-pp-text">Unsure what to post</p>
                            <p class="mobile-pp-subtext">
                                Ideas feel random and low impact.
                            </p>
                        </div>

                        <!-- Item 3: Not Premium Enough -->
                        <div class="mobile-pp-item">
                            <div class="mobile-pp-icon" aria-hidden="true">
                                <svg
                                    class="mobile-pp-svg"
                                    viewBox="0 0 64 64"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                >
                                    <path d="M32 8l18 18-18 30-18-30 18-18z"
                                    ></path>
                                    <path d="M18 26h28"></path>
                                </svg>
                            </div>
                            <p class="mobile-pp-text">Not premium enough</p>
                            <p class="mobile-pp-subtext">
                                Your brand doesn’t look high-end yet.
                            </p>
                        </div>

                        <!-- Item 4: Inconsistent Posting -->
                        <div class="mobile-pp-item">
                            <div class="mobile-pp-icon" aria-hidden="true">
                                <svg
                                    class="mobile-pp-svg"
                                    viewBox="0 0 64 64"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                >
                                    <rect
                                        x="12"
                                        y="16"
                                        width="40"
                                        height="36"
                                        rx="8"></rect>
                                    <path d="M12 26h40"></path>
                                    <path d="M22 12v8"></path>
                                    <path d="M42 12v8"></path>
                                    <circle cx="24" cy="36" r="2"></circle>
                                    <circle cx="36" cy="40" r="2"></circle>
                                </svg>
                            </div>
                            <p class="mobile-pp-text">Inconsistent posting</p>
                            <p class="mobile-pp-subtext">
                                The posting rhythm keeps breaking.
                            </p>
                        </div>

                        <!-- Item 5: Contradictory Advice -->
                        <div class="mobile-pp-item">
                            <div class="mobile-pp-icon" aria-hidden="true">
                                <svg
                                    class="mobile-pp-svg"
                                    viewBox="0 0 64 64"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                >
                                    <path d="M16 22h28"></path>
                                    <path d="M38 16l8 6-8 6"></path>
                                    <path d="M48 42H20"></path>
                                    <path d="M26 36l-8 6 8 6"></path>
                                </svg>
                            </div>
                            <p class="mobile-pp-text">Contradictory advice</p>
                            <p class="mobile-pp-subtext">
                                Every expert says the opposite.
                            </p>
                        </div>

                        <!-- Item 6: Views, No Action -->
                        <div class="mobile-pp-item">
                            <div class="mobile-pp-icon" aria-hidden="true">
                                <svg
                                    class="mobile-pp-svg"
                                    viewBox="0 0 64 64"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                >
                                    <path
                                        d="M8 32s10-14 24-14 24 14 24 14-10 14-24 14-24-14-24-14z"
                                    ></path>
                                    <circle cx="32" cy="32" r="6"></circle>
                                </svg>
                            </div>
                            <p class="mobile-pp-text">Views, no action</p>
                            <p class="mobile-pp-subtext">
                                Attention isn’t turning into sales.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
    /* Old imports removed */
    @import url("https://fonts.googleapis.com/css2?family=Architects+Daughter&display=swap");

    .font-handwriting {
        font-family: "Architects Daughter", cursive;
        letter-spacing: 0.02em;
    }

    .trustedby-playfair {
        font-family: var(--font-heading);
        font-weight: 300; /* Lighter weight for premium feel */
        letter-spacing: -0.02em;
    }

    .stat-count {
        font-family: var(--font-heading);
        font-weight: 400;
    }

    @media (max-width: 1023px) {
        .trustedby-playfair {
            font-size: 3rem;
        }

        .stat-count {
            font-family: var(--font-heading);
        }
    }

    @media (max-width: 1023px) {
        .trustedby-break {
            background: #f8f6f3;
            padding: 2.25rem 0 2.5rem;
            margin-top: 1rem;
            width: 100vw;
            margin-left: calc(50% - 50vw);
            margin-right: calc(50% - 50vw);
            padding-left: 1rem;
            padding-right: 1rem;
        }
    }

    .cursor-blink {
        display: inline-block;
        width: 2px;
        height: 0.8em;
        background-color: currentColor;
        margin-left: 2px;
        vertical-align: middle;
        animation: blink 1s step-end infinite;
    }

    @keyframes blink {
        from,
        to {
            opacity: 1;
        }
        50% {
            opacity: 0;
        }
    }

    /* Mercury Flow Animation */
    @keyframes mercury-flow {
        0% {
            background-position: 0% 50%;
        }
        50% {
            background-position: 100% 50%;
        }
        100% {
            background-position: 0% 50%;
        }
    }

    .mobile-pp-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        gap: 0.75rem;
        position: relative;
        padding: 0.25rem 0.5rem 1.25rem;
        opacity: 0;
        transform: translateY(18px);
        animation: mobile-pp-reveal 700ms ease forwards;
    }

    .mobile-pp-item:nth-child(1) {
        animation-delay: 80ms;
    }
    .mobile-pp-item:nth-child(2) {
        animation-delay: 160ms;
    }
    .mobile-pp-item:nth-child(3) {
        animation-delay: 240ms;
    }
    .mobile-pp-item:nth-child(4) {
        animation-delay: 320ms;
    }
    .mobile-pp-item:nth-child(5) {
        animation-delay: 400ms;
    }
    .mobile-pp-item:nth-child(6) {
        animation-delay: 480ms;
    }

    .mobile-pp-icon {
        width: 80px;
        height: 80px;
        display: grid;
        place-items: center;
        border-radius: 999px;
        border: 1px solid rgba(24, 24, 27, 0.08);
        background: linear-gradient(180deg, #ffffff 0%, #f6f2ea 100%);
        box-shadow: 0 12px 30px rgba(24, 24, 27, 0.08);
        color: #f59e0b;
        position: relative;
        overflow: hidden;
        animation: mobile-pp-float 3.6s ease-in-out infinite;
    }

    .mobile-pp-icon::before {
        content: "";
        position: absolute;
        inset: -60%;
        background: conic-gradient(
            from 120deg,
            rgba(245, 158, 11, 0.22),
            rgba(251, 191, 36, 0.1),
            rgba(255, 255, 255, 0.2),
            rgba(245, 158, 11, 0.22)
        );
        opacity: 0.35;
        animation: mobile-pp-spin 10s linear infinite;
    }

    .mobile-pp-svg {
        width: 44px;
        height: 44px;
        stroke-width: 2.2;
        position: relative;
        z-index: 1;
    }

    .mobile-pp-text {
        font-size: 1.05rem;
        line-height: 1.55;
        font-weight: 600;
        color: #111827;
        letter-spacing: -0.01em;
    }

    .mobile-pp-subtext {
        margin-top: -0.15rem;
        max-width: 18rem;
        font-size: 0.95rem;
        line-height: 1.5;
        color: #6b7280;
        font-weight: 500;
    }

    .mobile-pp-text,
    .mobile-pp-subtext {
        position: relative;
        z-index: 2;
        display: inline-block;
        background: #f8f6f3;
        padding: 0 0.5rem;
        box-decoration-break: clone;
    }

    .mobile-pp-wrap {
        position: relative;
    }

    .mobile-pp-wrap::before {
        content: "";
        position: absolute;
        top: 34px;
        bottom: 34px;
        left: 50%;
        width: 2px;
        transform: translateX(-50%);
        background: linear-gradient(
            180deg,
            rgba(249, 115, 22, 0) 0%,
            rgba(249, 115, 22, 0.35) 20%,
            rgba(249, 115, 22, 0.2) 80%,
            rgba(249, 115, 22, 0) 100%
        );
        opacity: 0.8;
        pointer-events: none;
    }

    .mobile-pp-list {
        position: relative;
        padding: 0.5rem 0;
    }

    @media (min-width: 480px) {
        .mobile-pp-icon {
            width: 92px;
            height: 92px;
        }

        .mobile-pp-svg {
            width: 52px;
            height: 52px;
        }

        .mobile-pp-text {
            font-size: 1.125rem;
        }

        .mobile-pp-subtext {
            font-size: 1rem;
        }
    }

    @keyframes mobile-pp-reveal {
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes mobile-pp-float {
        0%,
        100% {
            transform: translateY(0);
        }
        50% {
            transform: translateY(-6px);
        }
    }

    @keyframes mobile-pp-spin {
        to {
            transform: rotate(360deg);
        }
    }

    @media (prefers-reduced-motion: reduce) {
        .mobile-pp-item,
        .mobile-pp-icon,
        .mobile-pp-icon::before {
            animation: none;
        }
    }
</style>

<style>
    /* --- Creative Overhaul Styles --- */

    /* 1. Atmospheric Glow */
    .atmospheric-glow {
        position: absolute;
        top: 50%;
        right: 10%;
        width: 600px;
        height: 600px;
        background: radial-gradient(
            circle,
            rgba(132, 204, 22, 0.25) 0%,
            rgba(20, 184, 166, 0.1) 40%,
            transparent 70%
        );
        transform: translate(50%, -50%);
        filter: blur(80px);
        z-index: 0;
        animation: pulse-glow 8s ease-in-out infinite alternate;
        pointer-events: none;
    }

    @keyframes pulse-glow {
        0% {
            opacity: 0.5;
            transform: translate(50%, -50%) scale(0.9);
        }
        100% {
            opacity: 1;
            transform: translate(50%, -50%) scale(1.1);
        }
    }

    /* 2. Cinematic Noise Overlay */
    .noise-overlay {
        position: absolute;
        inset: 0;
        z-index: 1;
        opacity: 0.07;
        pointer-events: none;
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
    }

    /* Scroll Slider Styles */
    .scroll-container {
        position: relative;
        width: 100%;
        margin-top: 4rem;
        margin-bottom: 8rem;
        overflow: visible; /* Allow glow to bleed */
    }

    .viewport-frame {
        position: relative;
        height: 100%;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: flex-end; /* Align list to the right */
    }

    .pp-focus {
        position: absolute;
        top: 50%;
        right: 6%;
        transform: translateY(-50%);
        width: min(70%, 620px);
        height: 180px;
        background: radial-gradient(
            closest-side,
            rgba(255, 255, 255, 0.95) 0%,
            rgba(242, 241, 237, 0.85) 45%,
            rgba(242, 241, 237, 0) 100%
        );
        filter: blur(12px);
        opacity: 0.9;
        z-index: 1;
        pointer-events: none;
    }

    .pain-point-list {
        position: relative;
        width: 100%;
        max-width: 1000px;
        height: 100%;
        margin-right: 5%;
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        justify-content: center;
        perspective: 1500px;
        z-index: 2;
    }

    .pp-item {
        position: absolute;
        top: 50%;
        right: 4%;
        display: flex; /* Flex row for Arrow + Text */
        flex-direction: row-reverse; /* Arrow on right, Text on left */
        align-items: center;
        gap: 2rem;
        transform: translateY(-50%); /* Centered by default */
        /* Expo Ease Out for premium feel */
        transition:
            transform 1000ms cubic-bezier(0.22, 1, 0.36, 1),
            opacity 900ms ease,
            filter 900ms ease;
        opacity: 0;
        pointer-events: none;
        white-space: nowrap;
        will-change: transform, opacity;
    }

    .pp-text {
        font-family: var(--font-heading);
        font-weight: 300;
        text-transform: uppercase;
        margin: 0;
        line-height: 0.92;
        text-align: right;
        display: inline-block;
        transition:
            transform 700ms cubic-bezier(0.22, 1, 0.36, 1),
            opacity 700ms ease,
            color 700ms ease;
        color: rgba(24, 24, 27, 0.4);
        letter-spacing: 0.02em;
        text-rendering: geometricPrecision;
    }

    .pp-item:hover .pp-text {
        transform: translateX(-6px);
        color: rgba(24, 24, 27, 0.7);
    }

    .pp-arrow {
        font-size: 3rem;
        line-height: 1;
        transform: scaleX(-1) translateX(10px);
        transition:
            transform 0.6s cubic-bezier(0.22, 1, 0.36, 1),
            color 0.5s ease,
            opacity 0.5s;
        opacity: 0;
    }

    /* --- Visual States --- */

    /* HIDDEN (Default) */
    .pp-item {
        visibility: hidden;
    }

    /* TOP STATE: Distant, Solid, Faded */
    .pp-item.state-top {
        visibility: visible;
        opacity: 0.22;
        transform: translateY(-170px) scale(0.9);
        filter: blur(0.6px);
    }
    .pp-item.state-top .pp-text {
        font-size: 3.5rem;
        color: rgba(24, 24, 27, 0.3);
    }
    .pp-item.state-top .pp-arrow {
        transform: scaleX(-1) rotate(20deg);
        opacity: 0;
    }

    /* CENTER STATE: Active, Filled, Glows */
    .pp-item.state-active {
        visibility: visible;
        opacity: 1;
        transform: translateY(0) scale(1);
        filter: blur(0);
        z-index: 10;
        animation: pp-float 6s ease-in-out infinite;
    }
    .pp-item.state-active .pp-text {
        font-size: 8rem;
        color: #161616;
        text-shadow: 0 6px 28px rgba(0, 0, 0, 0.12);
        position: relative;
    }
    .pp-item.state-active .pp-text::after {
        content: "";
        position: absolute;
        right: 0;
        bottom: -0.4em;
        width: 56px;
        height: 2px;
        background: linear-gradient(90deg, #84cc16, transparent);
        opacity: 0.9;
    }
    .pp-item.state-active .pp-arrow {
        transform: scaleX(-1) rotate(0deg) translateX(0);
        opacity: 1;
        color: #84cc16;
        filter: drop-shadow(0 0 10px rgba(132, 204, 22, 0.5));
    }

    /* BOTTOM STATE: Entering, Solid, Faded */
    .pp-item.state-bottom {
        visibility: visible;
        opacity: 0.3;
        transform: translateY(170px) scale(0.92);
        filter: blur(0.6px);
    }
    .pp-item.state-bottom .pp-text {
        font-size: 5rem;
        color: rgba(24, 24, 27, 0.35);
    }
    .pp-item.state-bottom .pp-arrow {
        transform: scaleX(-1) rotate(-20deg);
        opacity: 0;
    }

    @keyframes pp-float {
        0%,
        100% {
            transform: translateY(0) scale(1);
        }
        50% {
            transform: translateY(-8px) scale(1);
        }
    }

    /* Responsive adjustments */
    @media (max-width: 1024px) {
        .pp-item.state-active .pp-text {
            font-size: 4rem;
        }
        .pp-item.state-top .pp-text {
            font-size: 1.8rem;
        }
        .pp-item.state-bottom .pp-text {
            font-size: 2.5rem;
        }
        .pain-point-list {
            margin-right: 2rem;
        }

        .atmospheric-glow {
            width: 400px;
            height: 400px;
            filter: blur(50px);
        }
    }

    @media (max-width: 768px) {
        .pp-item {
            gap: 1rem;
        }
        .pp-item.state-active .pp-text {
            font-size: 11vw; /* Responsive scaling to prevent cutoff */
            line-height: 1;
            white-space: normal; /* Allow wrapping if absolutely needed, though vw should fit */
            text-align: right;
        }
        .pp-item.state-top {
            transform: translateY(-220px) scale(0.8) skewX(5deg); /* Increased spacing */
        }
        .pp-item.state-top .pp-text {
            font-size: 6vw;
        }
        .pp-item.state-bottom {
            transform: translateY(220px) scale(0.9) skewX(-5deg); /* Increased spacing */
        }
        .pp-item.state-bottom .pp-text {
            font-size: 7vw;
        }
        .pp-arrow {
            font-size: 8vw;
        }

        .pain-point-list {
            height: 100%;
            margin-right: 1rem;
            width: 100%; /* Ensure full width availability */
        }
        .scroll-container {
            margin-bottom: 4rem;
            height: 60vh !important;
        }
    }

    @media (max-width: 480px) {
        .pp-item.state-active .pp-text {
            font-size: 13vw; /* Larger visual weight but fits screen width */
        }
        .pp-item.state-top {
            transform: translateY(-160px) scale(0.8) skewX(5deg);
        }
        .pp-item.state-top .pp-text {
            font-size: 6vw;
        }
        .pp-item.state-bottom {
            transform: translateY(160px) scale(0.9) skewX(-5deg);
        }
        .pp-item.state-bottom .pp-text {
            font-size: 7vw;
        }
        .pp-arrow {
            font-size: 8vw;
        }
    }
</style>

<style>
    :global(.trustedby-headline) {
        display: inline-block;
        white-space: nowrap;
    }
    :global(.trustedby-headline .word) {
        display: inline-block;
        transform: translateY(18px);
        opacity: 0;
        filter: blur(6px);
        transition:
            transform 2000ms ease,
            opacity 2000ms ease,
            filter 2000ms ease;
    }
    :global(.trustedby-headline.is-visible .word) {
        transform: translateY(0);
        opacity: 1;
        filter: blur(0);
    }
    @media (prefers-reduced-motion: reduce) {
        :global(.trustedby-headline .word),
        :global(.trustedby-headline.is-visible .word) {
            transform: none;
            filter: none;
            transition: none;
        }
    }
</style>

<style>
    .stat-item {
        transform: translateY(16px);
        opacity: 0;
        filter: blur(4px);
        transition:
            transform 600ms ease,
            opacity 600ms ease,
            filter 600ms ease;
    }
    .stat-item.is-visible {
        transform: translateY(0);
        opacity: 1;
        filter: blur(0);
    }
    @media (prefers-reduced-motion: reduce) {
        .stat-item,
        .stat-item.is-visible {
            transform: none;
            filter: none;
            transition: none;
        }
    }
</style>

<style>
    .trustedby-stats-shell {
        position: relative;
    }

    .trustedby-logos-static img {
        opacity: 0.55;
        filter: grayscale(1) contrast(0.6);
    }

    @media (max-width: 1023px) {
        .trustedby-shell {
            background: transparent;
        }

        .trustedby-pill {
            background: #ffffff;
            border: 1px solid rgba(0, 0, 0, 0.06);
            box-shadow: 0 8px 18px rgba(0, 0, 0, 0.08);
            padding: 0.5rem 1.2rem;
            font-size: 0.92rem;
        }

        .trustedby-dot {
            width: 6px;
            height: 6px;
            box-shadow: 0 0 10px rgba(132, 204, 22, 0.6);
        }

        .logo-mask {
            mask-image: none;
            -webkit-mask-image: none;
        }

        .trustedby-logos-static {
            gap: 1.1rem;
            max-width: 320px;
        }

        .trustedby-logo-item {
            width: 90px;
            height: 22px;
            flex: 1;
            max-width: 100px;
        }

        .trustedby-stats-shell {
            margin: 0;
            padding: 0;
            background: transparent;
            border: none;
            border-radius: 0;
            box-shadow: none;
        }

        .trustedby-stats-grid {
            margin: 1.35rem 0 2rem;
            gap: 1.35rem;
        }

        .stat-item {
            padding: 0.25rem 0.3rem;
        }

        .stat-count {
            font-size: 2.25rem;
            line-height: 1;
            color: #84cc16;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #6b7280;
            line-height: 1.25;
            font-weight: 500;
        }
    }

    @media (min-width: 640px) and (max-width: 1023px) {
        .trustedby-logo-item {
            width: 110px;
            height: 26px;
        }

        .stat-count {
            font-size: 2.5rem;
        }

        .stat-label {
            font-size: 0.98rem;
        }
    }

    @media (max-width: 480px) {
        .trustedby-logos-static {
            gap: 0.85rem;
            max-width: 280px;
        }

        .trustedby-logo-item {
            width: 78px;
            height: 20px;
        }
    }
</style>

<style>
    .trustedby-pill {
        animation: breathe 4s ease-in-out infinite;
        transform-origin: center;
    }
    .trustedby-dot {
        animation: pulse-dot 2s ease-in-out infinite;
    }
    @keyframes pulse-dot {
        0%,
        100% {
            opacity: 1;
            transform: scale(1);
        }
        50% {
            opacity: 0.25;
            transform: scale(0.7);
        }
    }
    @keyframes breathe {
        0%,
        100% {
            transform: scale(1);
        }
        50% {
            transform: scale(1.03);
        }
    }
    .logo-marquee {
        animation: marquee 24s linear infinite;
    }
    .logo-mask {
        mask-image: linear-gradient(
            90deg,
            transparent 0%,
            #000 20%,
            #000 80%,
            transparent 100%
        );
        -webkit-mask-image: linear-gradient(
            90deg,
            transparent 0%,
            #000 20%,
            #000 80%,
            transparent 100%
        );
    }
    @keyframes marquee {
        0% {
            transform: translateX(0);
        }
        100% {
            transform: translateX(-50%);
        }
    }

    .animate-float-delayed {
        animation: float-delayed 4s ease-in-out infinite;
    }
    @keyframes float-delayed {
        0%,
        100% {
            transform: translateY(0);
        }
        50% {
            transform: translateY(-10px);
        }
    }

    @media (prefers-reduced-motion: reduce) {
        .trustedby-pill,
        .trustedby-dot,
        .logo-marquee,
        .atmospheric-glow,
        .animate-float-delayed {
            animation: none;
        }
    }
</style>

<script>
    // Hybrid Scroll + Auto-Play Logic
    const scrollContainer = document.querySelector(".scroll-container");
    const items = document.querySelectorAll(".pp-item");

    if (scrollContainer && items.length > 0) {
        const allowMotion =
            !window.matchMedia("(prefers-reduced-motion: reduce)").matches;
        let scrollProgress = 0;
        let autoProgress = 0;
        let lastTime = 0;
        let rafId = 0;
        let running = false;
        const speed = 0.25; // Items per second (Slow & Premium)

        // Update Scroll Progress on Scroll
        function onScroll() {
            if (!scrollContainer) return;
            const rect = scrollContainer.getBoundingClientRect();
            const viewportHeight = window.innerHeight;
            const totalDistance = viewportHeight + rect.height;
            const distanceTraveled = viewportHeight - rect.top;

            // Normalize 0 to 1
            let raw = distanceTraveled / totalDistance;
            // Map to total items range
            scrollProgress = raw * items.length;
        }
        window.addEventListener("scroll", onScroll, { passive: true });
        onScroll(); // Init

        function render(activeIndex: number) {
            const count = items.length;
            items.forEach((item, index) => {
                item.classList.remove(
                    "state-active",
                    "state-top",
                    "state-bottom",
                );

                const topIndex = (activeIndex - 1 + count) % count;
                const bottomIndex = (activeIndex + 1) % count;

                if (index === activeIndex) {
                    item.classList.add("state-active");
                } else if (index === topIndex) {
                    item.classList.add("state-top");
                } else if (index === bottomIndex) {
                    item.classList.add("state-bottom");
                }
            });
        }

        // Animation Loop (only when visible)
        function loop(time: number) {
            if (!running) return;
            if (!lastTime) lastTime = time;
            const delta = (time - lastTime) / 1000;
            lastTime = time;

            // Auto-advance
            autoProgress += speed * delta;

            // Combine
            const totalIndex = scrollProgress + autoProgress;

            // Wrap index
            const activeIndex = Math.floor(
                ((totalIndex % items.length) + items.length) % items.length,
            );

            render(activeIndex);

            rafId = requestAnimationFrame(loop);
        }

        function startLoop() {
            if (!allowMotion || running) return;
            running = true;
            lastTime = 0;
            rafId = requestAnimationFrame(loop);
        }

        function stopLoop() {
            running = false;
            if (rafId) {
                cancelAnimationFrame(rafId);
                rafId = 0;
            }
        }

        if (!allowMotion) {
            render(0);
        } else {
            const sliderObserver = new IntersectionObserver(
                (entries) => {
                    entries.forEach((entry) => {
                        if (entry.isIntersecting) {
                            onScroll();
                            startLoop();
                        } else {
                            stopLoop();
                        }
                    });
                },
                { threshold: 0.1 },
            );

            sliderObserver.observe(scrollContainer);
        }
    }

    // Typing Animation for "too hard?"
    const headlineEl = document.querySelector(".trustedby-headline");
    const cursorEl = document.querySelector(".trustedby-cursor");
    const textToType = headlineEl?.getAttribute("data-text") || "";

    if (headlineEl && textToType) {
        let charIdx = 0;
        let hasAnimated = false;

        const typeHeadline = () => {
            if (charIdx < textToType.length) {
                headlineEl.textContent += textToType.charAt(charIdx);
                charIdx++;
                setTimeout(typeHeadline, 100);
            } else {
                // Keep cursor blinking for a bit then hide? Or keep it.
                // User said animate, let's keep it blinking.
            }
        };

        const observer = new IntersectionObserver(
            (entries) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting && !hasAnimated) {
                        hasAnimated = true;
                        setTimeout(typeHeadline, 500);
                    }
                });
            },
            { threshold: 0.5 },
        );

        observer.observe(headlineEl);
    }

    // Stats Counter Animation
    const statsSection = document.querySelector("[data-trustedby-section]");
    const statCounts = document.querySelectorAll(".stat-count");

    if (statsSection && statCounts.length > 0) {
        let hasCounted = false;

        const startCounting = () => {
            statCounts.forEach((stat) => {
                const target = stat.getAttribute("data-target");
                const decimals = parseInt(
                    stat.getAttribute("data-decimals") || "0",
                );
                const suffix = stat.getAttribute("data-suffix") || "";

                // Parse target (handle K/M/B suffixes if present in data-target, though likely passed as value)
                // Assuming data-target is a raw number string based on props
                let endValue = parseFloat(target || "0");

                // Simple animation
                let startValue = 0;
                let duration = 2000;
                let startTime: number | null = null;

                function step(timestamp: number) {
                    if (!startTime) startTime = timestamp;
                    const progress = Math.min(
                        (timestamp - startTime) / duration,
                        1,
                    );

                    // Ease out quart
                    const ease = 1 - Math.pow(1 - progress, 4);

                    const current = startValue + (endValue - startValue) * ease;

                    // Format
                    let formatted = current.toFixed(decimals);

                    // Add suffix
                    stat.textContent = formatted + suffix;

                    if (progress < 1) {
                        window.requestAnimationFrame(step);
                    }
                }
                window.requestAnimationFrame(step);
            });
        };

        const statsObserver = new IntersectionObserver(
            (entries) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        // Reveal items
                        document
                            .querySelectorAll(".stat-item")
                            .forEach((el, i) => {
                                el.classList.add("is-visible");
                            });

                        startCounting();
                    } else {
                        // Optional: Hide items to re-trigger fade-in or just reset numbers?
                        // To "count up every time", we simply need to re-run startCounting on entry.
                        // But for cleanest effect, we can remove is-visible class so they fade in again too.
                        document
                            .querySelectorAll(".stat-item")
                            .forEach((el) => {
                                el.classList.remove("is-visible");
                            });
                    }
                });
            },
            { threshold: 0.2 },
        );

        statsObserver.observe(statsSection);
    }
</script>
